# C++ æŒ‡é’ˆå…¨é¢æŒ‡å—

## ğŸ“Œ æŒ‡é’ˆæ ¸å¿ƒæ¦‚å¿µå›¾è§£

```mermaid
graph TD
    A[æŒ‡é’ˆ] --> B[å®šä¹‰ä¸ä½¿ç”¨]
    A --> C[å†…å­˜ç©ºé—´]
    A --> D[ç©ºæŒ‡é’ˆ]
    A --> E[é‡æŒ‡é’ˆ]
    A --> F[constä¿®é¥°]
    A --> G[æŒ‡é’ˆä¸æ•°ç»„]
    A --> H[æŒ‡é’ˆä¸å‡½æ•°]
    A --> I[ç»¼åˆæ¡ˆä¾‹]
```

## 1. æŒ‡é’ˆçš„å®šä¹‰å’Œä½¿ç”¨

### åŸºæœ¬æ¦‚å¿µ
- **æŒ‡é’ˆ**ï¼šå­˜å‚¨å†…å­˜åœ°å€çš„å˜é‡
- **å£°æ˜è¯­æ³•**ï¼š`æ•°æ®ç±»å‹* æŒ‡é’ˆå˜é‡å;`
- **å–å€è¿ç®—ç¬¦**ï¼š`&`ï¼ˆè·å–å˜é‡åœ°å€ï¼‰
- **è§£å¼•ç”¨è¿ç®—ç¬¦**ï¼š`*`ï¼ˆè®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼‰

### ä½¿ç”¨ç¤ºä¾‹
```cpp
int num = 10;       // æ•´å‹å˜é‡
int* ptr = &num;    // ptræŒ‡å‘numçš„åœ°å€

cout << "numçš„å€¼: " << num << endl;       // 10
cout << "numçš„åœ°å€: " << &num << endl;    // 0x7ffe... (å®é™…åœ°å€)
cout << "ptrå­˜å‚¨çš„åœ°å€: " << ptr << endl;  // åŒä¸Š
cout << "ptræŒ‡å‘çš„å€¼: " << *ptr << endl;  // 10

// é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
*ptr = 20;
cout << "ä¿®æ”¹ånumçš„å€¼: " << num << endl; // 20
```

### æŒ‡é’ˆæ“ä½œå›¾è§£
```
å†…å­˜åœ°å€ | å˜é‡å | å€¼
0x1000  | num   | 20
0x2000  | ptr   | 0x1000

*ptr â†’ è§£å¼•ç”¨ â†’ è®¿é—®0x1000çš„å€¼ â†’ 20
```

## 2. æŒ‡é’ˆæ‰€å å†…å­˜ç©ºé—´

### å…³é”®ç‚¹
- æŒ‡é’ˆçš„å¤§å°å–å†³äº**æ“ä½œç³»ç»Ÿæ¶æ„**
- ä¸æŒ‡é’ˆç±»å‹æ— å…³ï¼ˆint*, double*, char* å¤§å°ç›¸åŒï¼‰
- 32ä½ç³»ç»Ÿï¼š**4å­—èŠ‚**
- 64ä½ç³»ç»Ÿï¼š**8å­—èŠ‚**

### éªŒè¯ä»£ç 
```cpp
cout << "sizeof(int*): " << sizeof(int*) << endl;      // 4æˆ–8
cout << "sizeof(double*): " << sizeof(double*) << endl; // åŒä¸Š
cout << "sizeof(char*): " << sizeof(char*) << endl;    // åŒä¸Š
cout << "sizeof(void*): " << sizeof(void*) << endl;    // åŒä¸Š
```

### å†…å­˜å¸ƒå±€ç¤ºä¾‹
```
32ä½ç³»ç»Ÿï¼š
æŒ‡é’ˆåœ°å€ï¼š0x1000 - 0x1003 (4å­—èŠ‚)

64ä½ç³»ç»Ÿï¼š
æŒ‡é’ˆåœ°å€ï¼š0x2000 - 0x2007 (8å­—èŠ‚)
```

## 3. ç©ºæŒ‡é’ˆ (Null Pointer)

### å®šä¹‰ä¸ç‰¹æ€§
- æŒ‡å‘åœ°å€0çš„æŒ‡é’ˆ
- è¡¨ç¤º"æ— æŒ‡å‘"çš„æŒ‡é’ˆ
- åˆå§‹åŒ–æŒ‡é’ˆçš„æ¨èæ–¹å¼
- è§£å¼•ç”¨ç©ºæŒ‡é’ˆä¼šå¯¼è‡´**æ®µé”™è¯¯**

### ä½¿ç”¨æ–¹å¼
```cpp
int* ptr1 = NULL;      // Cè¯­è¨€ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸æ¨èï¼‰
int* ptr2 = nullptr;   // C++11æ¨èæ–¹å¼
int* ptr3 = 0;         // å­—é¢é‡é›¶

// æ£€æŸ¥ç©ºæŒ‡é’ˆ
if (ptr2 == nullptr) {
    cout << "æŒ‡é’ˆä¸ºç©º" << endl;
}

// é”™è¯¯ç¤ºä¾‹ï¼ˆå¯¼è‡´ç¨‹åºå´©æºƒï¼‰
// *ptr1 = 10;  // æ®µé”™è¯¯!
```

### åº”ç”¨åœºæ™¯
1. åˆå§‹åŒ–æŒ‡é’ˆå˜é‡
2. å‡½æ•°è¿”å›é”™è¯¯æŒ‡ç¤º
3. æ ‡è®°é“¾è¡¨/æ ‘ç»“æ„çš„ç»“æŸ

## 4. é‡æŒ‡é’ˆ (Wild Pointer)

### å®šä¹‰ä¸å±å®³
- æŒ‡å‘**æ— æ•ˆå†…å­˜**çš„æŒ‡é’ˆ
- å¸¸è§äº§ç”ŸåŸå› ï¼š
  - æœªåˆå§‹åŒ–çš„æŒ‡é’ˆ
  - å·²é‡Šæ”¾å†…å­˜çš„æŒ‡é’ˆ
  - è¶Šç•Œè®¿é—®çš„æŒ‡é’ˆ
- å±å®³ï¼šä¸å¯é¢„æµ‹è¡Œä¸ºï¼Œç¨‹åºå´©æºƒï¼Œå®‰å…¨æ¼æ´

### ç¤ºä¾‹ä¸é¿å…
```cpp
// ç¤ºä¾‹1ï¼šæœªåˆå§‹åŒ–æŒ‡é’ˆ
int* wildPtr1;  // æœªåˆå§‹åŒ–
// *wildPtr1 = 5; // å±é™©æ“ä½œï¼

// ç¤ºä¾‹2ï¼šé‡Šæ”¾åæœªç½®ç©º
int* ptr = new int(10);
delete ptr;     // é‡Šæ”¾å†…å­˜
// *ptr = 20;   // è®¿é—®å·²é‡Šæ”¾å†…å­˜ï¼ˆé‡æŒ‡é’ˆï¼‰
ptr = nullptr;  // æ­£ç¡®åšæ³•ï¼šé‡Šæ”¾åç½®ç©º

// ç¤ºä¾‹3ï¼šæŒ‡å‘å±€éƒ¨å˜é‡
int* createDangling() {
    int local = 30;
    return &local; // è¿”å›å±€éƒ¨å˜é‡åœ°å€
}
int* dangling = createDangling();
// *dangling;    // å±€éƒ¨å˜é‡å·²é”€æ¯ï¼Œé‡æŒ‡é’ˆï¼
```

### é¿å…é‡æŒ‡é’ˆç­–ç•¥
1. åˆå§‹åŒ–æ‰€æœ‰æŒ‡é’ˆï¼ˆ`= nullptr`ï¼‰
2. é‡Šæ”¾å†…å­˜åç«‹å³ç½®ç©º
3. ä¸è¿”å›å±€éƒ¨å˜é‡åœ°å€
4. ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆC++11+ï¼‰

## 5. constä¿®é¥°æŒ‡é’ˆ

### ä¸‰ç§constæŒ‡é’ˆç±»å‹

| ç±»å‹ | è¯­æ³• | ç‰¹ç‚¹ | ç¤ºä¾‹ |
|------|------|------|------|
| å¸¸é‡æŒ‡é’ˆ | `const int* ptr` | æŒ‡å‘å¸¸é‡ï¼Œå€¼ä¸å¯æ”¹ | `*ptr = 10;` âŒ |
| æŒ‡é’ˆå¸¸é‡ | `int* const ptr` | æŒ‡é’ˆä¸å¯æ”¹æŒ‡å‘ | `ptr = &b;` âŒ |
| åŒé‡const | `const int* const ptr` | å€¼å’ŒæŒ‡å‘éƒ½ä¸å¯æ”¹ | å…¨âŒ |

### ä»£ç ç¤ºä¾‹
```cpp
int a = 10, b = 20;

// 1. æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
const int* ptr1 = &a;
// *ptr1 = 15; // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹å€¼
ptr1 = &b;     // æ­£ç¡®ï¼šå¯ä»¥æ”¹å˜æŒ‡å‘

// 2. æŒ‡é’ˆå¸¸é‡
int* const ptr2 = &a;
*ptr2 = 15;    // æ­£ç¡®ï¼šå¯ä»¥ä¿®æ”¹å€¼
// ptr2 = &b;  // é”™è¯¯ï¼šä¸èƒ½æ”¹å˜æŒ‡å‘

// 3. åŒé‡const
const int* const ptr3 = &a;
// *ptr3 = 15; // é”™è¯¯
// ptr3 = &b;  // é”™è¯¯

// 4. å¸¸é‡æŒ‡é’ˆå¸¸é‡
const int const* const ptr4 = &a; // ç­‰ä»·äº3
```

### å‡½æ•°å‚æ•°ä¸­çš„åº”ç”¨
```cpp
// å®‰å…¨ä¼ é€’ï¼šé˜²æ­¢æ„å¤–ä¿®æ”¹
void printArray(const int* arr, int size) {
    // arr[i] åªè¯»
}

// ä¿æŠ¤æŒ‡é’ˆä¸è¢«é‡æ–°æŒ‡å‘
void process(int* const data) {
    // dataä¸èƒ½æŒ‡å‘å…¶ä»–åœ°å€
}
```

## 6. æŒ‡é’ˆå’Œæ•°ç»„

### æŒ‡é’ˆä¸æ•°ç»„çš„å…³ç³»
- æ•°ç»„åæ˜¯**é¦–å…ƒç´ åœ°å€å¸¸é‡**
- æŒ‡é’ˆå¯è¿›è¡Œ**ç®—æœ¯è¿ç®—**è®¿é—®æ•°ç»„å…ƒç´ 
- `arr[i]` ç­‰ä»·äº `*(arr + i)`

### æ“ä½œç¤ºä¾‹
```cpp
int nums[5] = {10, 20, 30, 40, 50};

// 1. æŒ‡é’ˆè®¿é—®æ•°ç»„
int* ptr = nums; // æŒ‡å‘é¦–å…ƒç´ 
cout << *ptr;    // 10
cout << *(ptr + 2); // 30 (ç­‰ä»·äºnums[2])

// 2. éå†æ•°ç»„
for (int i = 0; i < 5; i++) {
    cout << *(ptr + i) << " ";
}

// 3. æŒ‡é’ˆä¸æ•°ç»„åçš„åŒºåˆ«
cout << sizeof(nums); // 20 (æ•´ä¸ªæ•°ç»„å¤§å°)
cout << sizeof(ptr);  // 4æˆ–8 (æŒ‡é’ˆå¤§å°)
```

### å¤šç»´æ•°ç»„æŒ‡é’ˆ
```cpp
int matrix[2][3] = {{1,2,3}, {4,5,6}};

// 1. è¡ŒæŒ‡é’ˆ
int (*rowPtr)[3] = matrix;
cout << (*rowPtr)[1];    // 2
cout << (*(rowPtr + 1))[2]; // 6

// 2. å…ƒç´ æŒ‡é’ˆ
int* elemPtr = &matrix[0][0];
cout << *(elemPtr + 3);  // 4 (ç¬¬äºŒè¡Œç¬¬ä¸€ä¸ª)
```

åœ¨è¿™ä¸ª`printArray`å‡½æ•°ä¸­ï¼Œ`int* arr`æ˜¯ä¸€ä¸ª**æ•´æ•°æŒ‡é’ˆ**å‚æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¥æ”¶ä¸€ä¸ªæ•´æ•°æ•°ç»„çš„åœ°å€ã€‚è¦ç†è§£å®ƒåœ¨å‡½æ•°ä¸­çš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ˜ç¡®å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š

- ### æŒ‡é’ˆçš„æœ¬è´¨

æŒ‡é’ˆæ˜¯ä¸€ç§å˜é‡ï¼Œå®ƒå­˜å‚¨çš„ä¸æ˜¯æ•°æ®æœ¬èº«ï¼Œè€Œæ˜¯**å¦ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€**ã€‚  
ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ•´æ•°å˜é‡`int a = 10`ï¼Œé‚£ä¹ˆ`&a`è¡¨ç¤º`a`çš„å†…å­˜åœ°å€ï¼ˆå‡è®¾æ˜¯`0x1234`ï¼‰ï¼Œè€ŒæŒ‡é’ˆ`int* p = &a`å°±å­˜å‚¨äº†è¿™ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`*p`æ¥è®¿é—®`a`çš„å€¼ï¼ˆ`10`ï¼‰ã€‚

- ### ä¸ºä»€ä¹ˆå‡½æ•°å‚æ•°ç”¨æŒ‡é’ˆæ¥æ”¶æ•°ç»„ï¼Ÿ

åœ¨ C/C++ ä¸­ï¼Œ**æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œä¼šè‡ªåŠ¨éšé€€åŒ–ä¸ºæŒ‡é’ˆ**ã€‚  
ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ æŠŠä¸€ä¸ªæ•°ç»„ï¼ˆæ¯”å¦‚`int numbers[5]`ï¼‰ä¼ ç»™å‡½æ•°æ—¶ï¼Œå‡½æ•°å®é™…æ”¶åˆ°çš„ä¸æ˜¯æ•´ä¸ªæ•°ç»„çš„å‰¯æœ¬ï¼Œè€Œæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼ˆç›¸å½“äº`&numbers[0]`ï¼‰ã€‚

å› æ­¤ï¼Œå‡½æ•°å‚æ•°å†™æˆ`int* arr`ï¼Œæœ¬è´¨ä¸Šæ˜¯æ¥æ”¶è¿™ä¸ªæ•°ç»„çš„é¦–åœ°å€ã€‚é€šè¿‡è¿™ä¸ªé¦–åœ°å€ï¼Œå‡½æ•°å°±èƒ½æ‰¾åˆ°æ•´ä¸ªæ•°ç»„åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚

- ### å‡½æ•°ä¸­å¦‚ä½•é€šè¿‡æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ ï¼Ÿ

åœ¨`printArray`ä¸­ï¼Œ`arr[i]`çš„å†™æ³•çœ‹ä¼¼æ˜¯ â€œæ•°ç»„è®¿é—®â€ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯**é€šè¿‡æŒ‡é’ˆè®¡ç®—å®ç°çš„**ï¼š  
`arr[i]`ç­‰ä»·äº`*(arr + i)`ï¼Œæ„æ€æ˜¯ï¼š

- ä»`arr`æŒ‡å‘çš„é¦–åœ°å€å¼€å§‹ï¼Œå‘åç§»åŠ¨`i`ä¸ªæ•´æ•°çš„ä½ç½®ï¼ˆæ¯ä¸ªæ•´æ•°å  4 å­—èŠ‚ï¼Œæ‰€ä»¥å®é™…ç§»åŠ¨`i*4`å­—èŠ‚ï¼‰
- å–å‡ºè¯¥ä½ç½®çš„æ•°å€¼ï¼ˆé€šè¿‡`*`è§£å¼•ç”¨æŒ‡é’ˆï¼‰

ä¾‹å¦‚ï¼š

- `arr[0]`Â ç­‰ä»·äºÂ `*(arr + 0)`Â â†’ è®¿é—®æ•°ç»„ç¬¬ 1 ä¸ªå…ƒç´ 
- `arr[1]`Â ç­‰ä»·äºÂ `*(arr + 1)`Â â†’ è®¿é—®æ•°ç»„ç¬¬ 2 ä¸ªå…ƒç´ 

ä»¥æ­¤ç±»æ¨


- ### ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¼ é€’`size`å‚æ•°ï¼Ÿ

å› ä¸ºæ•°ç»„é€€åŒ–ä¸ºæŒ‡é’ˆåï¼ŒæŒ‡é’ˆæœ¬èº«**ä¸åŒ…å«æ•°ç»„é•¿åº¦ä¿¡æ¯**ã€‚  
`arr`åªçŸ¥é“æ•°ç»„çš„èµ·å§‹åœ°å€ï¼Œä½†ä¸çŸ¥é“è¿™ä¸ªæ•°ç»„æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚å¦‚æœæ²¡æœ‰`size`å‚æ•°ï¼Œå‡½æ•°æ— æ³•ç¡®å®šå¾ªç¯ä½•æ—¶ç»“æŸï¼ˆå¯èƒ½ä¼šè®¿é—®åˆ°æ•°ç»„å¤–çš„æ— æ•ˆå†…å­˜ï¼‰ã€‚

- ### æ€»ç»“

å‡½æ•°ä¸­çš„`int* arr`æŒ‡é’ˆçš„ä½œç”¨æ˜¯ï¼š  
é€šè¿‡æ¥æ”¶æ•°ç»„çš„é¦–åœ°å€ï¼Œè®©å‡½æ•°èƒ½å¤Ÿå®šä½åˆ°æ•°ç»„åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œå†ç»“åˆ`size`å‚æ•°ï¼Œå°±èƒ½éå†å¹¶è®¿é—®æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚è¿™æ˜¯ C/C++ ä¸­ä¼ é€’æ•°ç»„çš„æ ‡å‡†æ–¹å¼ï¼Œç›¸æ¯”ä¼ é€’æ•´ä¸ªæ•°ç»„å‰¯æœ¬ï¼Œæ›´èŠ‚çœå†…å­˜å’Œæ—¶é—´ã€‚

## 7. æŒ‡é’ˆå’Œå‡½æ•°

### æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°
- **å€¼ä¼ é€’**ï¼šä¼ é€’æŒ‡é’ˆå‰¯æœ¬ï¼ˆå¯ä¿®æ”¹æŒ‡å‘çš„å€¼ï¼‰
- **å¼•ç”¨ä¼ é€’**ï¼šä¼ é€’æŒ‡é’ˆæœ¬èº«ï¼ˆå¯ä¿®æ”¹æŒ‡é’ˆï¼‰

### åº”ç”¨åœºæ™¯
```cpp
// 1. ä¿®æ”¹å®å‚å€¼
void increment(int* value) {
    (*value)++;
}

int num = 5;
increment(&num); // numå˜ä¸º6

// 2. ä¼ é€’æ•°ç»„
void printArray(int* arr, int size) {
    for(int i=0; i<size; i++) {
        cout << arr[i] << " ";
    }
}

// 3. è¿”å›åŠ¨æ€å†…å­˜
int* createArray(int size) {
    return new int[size]; // è¿”å›å †å†…å­˜æŒ‡é’ˆ
}

// æ³¨æ„ï¼šè°ƒç”¨è€…éœ€è´Ÿè´£é‡Šæ”¾å†…å­˜
int* arr = createArray(10);
delete[] arr;
```

### å‡½æ•°æŒ‡é’ˆ
```cpp
// 1. å®šä¹‰å‡½æ•°æŒ‡é’ˆ
int (*funcPtr)(int, int); // æŒ‡å‘æ¥æ”¶ä¸¤ä¸ªintè¿”å›intçš„å‡½æ•°

// 2. èµ‹å€¼
int add(int a, int b) { return a + b; }
funcPtr = add;

// 3. è°ƒç”¨
cout << funcPtr(3, 4); // 7

// 4. ä½œä¸ºå‚æ•°
void calculate(int (*op)(int, int), int x, int y) {
    cout << op(x, y);
}
calculate(add, 5, 6); // 11
```

## 8. æŒ‡é’ˆé…åˆæ•°ç»„å’Œå‡½æ•°æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šæ•°ç»„æ’åºï¼ˆå†’æ³¡æ’åºï¼‰
```cpp
void bubbleSort(int* arr, int size) {
    for (int i = 0; i < size-1; i++) {
        for (int j = 0; j < size-1-i; j++) {
            if (*(arr + j) > *(arr + j + 1)) {
                // äº¤æ¢å…ƒç´ 
                int temp = *(arr + j);
                *(arr + j) = *(arr + j + 1);
                *(arr + j + 1) = temp;
            }
        }
    }
}

int main() {
    int nums[] = {5, 3, 8, 6, 2, 7, 1, 4};
    int size = sizeof(nums)/sizeof(nums[0]);
    
    bubbleSort(nums, size);
    
    cout << "æ’åºå: ";
    for (int i = 0; i < size; i++) {
        cout << nums[i] << " ";
    }
    return 0;
}
```

### æ¡ˆä¾‹2ï¼šåŠ¨æ€çŸ©é˜µè¿ç®—
```cpp
// åˆ›å»ºåŠ¨æ€äºŒç»´æ•°ç»„
int** createMatrix(int rows, int cols) {
    int** matrix = new int*[rows];
    for (int i = 0; i < rows; i++) {
        matrix[i] = new int[cols];
    }
    return matrix;
}

// é‡Šæ”¾å†…å­˜
void freeMatrix(int** matrix, int rows) {
    for (int i = 0; i < rows; i++) {
        delete[] matrix[i];
    }
    delete[] matrix;
}

// çŸ©é˜µä¹˜æ³•
void matrixMultiply(int** a, int** b, int** result, 
                   int m, int n, int p) {
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < p; j++) {
            result[i][j] = 0;
            for (int k = 0; k < n; k++) {
                result[i][j] += a[i][k] * b[k][j];
            }
        }
    }
}

int main() {
    const int M = 2, N = 3, P = 2;
    
    // åˆ›å»ºçŸ©é˜µ
    int** matA = createMatrix(M, N);
    int** matB = createMatrix(N, P);
    int** matC = createMatrix(M, P);
    
    // åˆå§‹åŒ–æ•°æ®...
    
    // çŸ©é˜µä¹˜æ³•
    matrixMultiply(matA, matB, matC, M, N, P);
    
    // é‡Šæ”¾å†…å­˜
    freeMatrix(matA, M);
    freeMatrix(matB, N);
    freeMatrix(matC, M);
    
    return 0;
}
```

### æ¡ˆä¾‹3ï¼šå‡½æ•°æŒ‡é’ˆåº”ç”¨ï¼ˆè®¡ç®—å™¨ï¼‰
```cpp
#include <iostream>
using namespace std;

// è®¡ç®—æ“ä½œç±»å‹
typedef double (*Operation)(double, double);

// åŸºæœ¬è¿ç®—
double add(double a, double b) { return a + b; }
double subtract(double a, double b) { return a - b; }
double multiply(double a, double b) { return a * b; }
double divide(double a, double b) { 
    if (b != 0) return a / b;
    cerr << "é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0ï¼";
    return 0;
}

// è®¡ç®—å™¨å‡½æ•°
double calculate(double x, double y, Operation op) {
    return op(x, y);
}

int main() {
    Operation ops[] = {add, subtract, multiply, divide};
    char symbols[] = {'+', '-', '*', '/'};
    
    double num1, num2;
    cout << "è¾“å…¥ä¸¤ä¸ªæ•°å­—: ";
    cin >> num1 >> num2;
    
    cout << "é€‰æ‹©æ“ä½œ: \n";
    for (int i = 0; i < 4; i++) {
        cout << i+1 << ": " << symbols[i] << endl;
    }
    
    int choice;
    cin >> choice;
    
    if (choice >= 1 && choice <= 4) {
        double result = calculate(num1, num2, ops[choice-1]);
        cout << num1 << " " << symbols[choice-1] << " " 
             << num2 << " = " << result << endl;
    } else {
        cout << "æ— æ•ˆé€‰æ‹©ï¼" << endl;
    }
    
    return 0;
}
```

## âš ï¸ æŒ‡é’ˆå®‰å…¨æŒ‡å—

1. **åˆå§‹åŒ–åŸåˆ™**ï¼šå£°æ˜æ—¶ç«‹å³åˆå§‹åŒ–ï¼ˆ`= nullptr`ï¼‰
2. **ç©ºæŒ‡é’ˆæ£€æŸ¥**ï¼šè§£å¼•ç”¨å‰æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºç©º
3. **å†…å­˜ç®¡ç†**ï¼š
   - `new` å’Œ `delete` é…å¯¹ä½¿ç”¨
   - `new[]` å’Œ `delete[]` é…å¯¹ä½¿ç”¨
4. **é¿å…é‡æŒ‡é’ˆ**ï¼š
   - é‡Šæ”¾åç½®ç©º
   - ä¸è¿”å›å±€éƒ¨å˜é‡åœ°å€
5. **constä¿æŠ¤**ï¼š
   - ä½¿ç”¨`const`ä¿æŠ¤ä¸åº”ä¿®æ”¹çš„æ•°æ®
   - ä¼˜å…ˆä½¿ç”¨å¸¸é‡å¼•ç”¨ä»£æ›¿æŒ‡é’ˆ
6. **æ™ºèƒ½æŒ‡é’ˆ**ï¼šC++11+æ¨èä½¿ç”¨`unique_ptr`, `shared_ptr`

```cpp
#include <memory>

// ç°ä»£C++å†…å­˜ç®¡ç†
auto ptr = make_unique<int>(10); // C++14
shared_ptr<double> shared = make_shared<double>(3.14);
```

## ğŸ“Š æŒ‡é’ˆç±»å‹æ€»ç»“è¡¨

| æŒ‡é’ˆç±»å‹ | å£°æ˜ç¤ºä¾‹ | ç‰¹ç‚¹ |
|----------|----------|------|
| æ™®é€šæŒ‡é’ˆ | `int* p;` | å¯ä¿®æ”¹å€¼å’ŒæŒ‡å‘ |
| æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ | `const int* p;` | å€¼ä¸å¯æ”¹ï¼ŒæŒ‡å‘å¯æ”¹ |
| æŒ‡é’ˆå¸¸é‡ | `int* const p;` | æŒ‡å‘ä¸å¯æ”¹ï¼Œå€¼å¯æ”¹ |
| åŒé‡const | `const int* const p;` | å€¼å’ŒæŒ‡å‘éƒ½ä¸å¯æ”¹ |
| å‡½æ•°æŒ‡é’ˆ | `int (*func)(int, int);` | æŒ‡å‘å‡½æ•° |
| æ™ºèƒ½æŒ‡é’ˆ | `unique_ptr<int> p;` | è‡ªåŠ¨å†…å­˜ç®¡ç† |

> ğŸ’¡ **æŒ‡é’ˆä½¿ç”¨é»„é‡‘æ³•åˆ™**ï¼š  
> **æ°¸è¿œçŸ¥é“**ä½ çš„æŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Œ**æ°¸è¿œç¡®ä¿**ä½ è®¿é—®çš„å†…å­˜æ˜¯æœ‰æ•ˆçš„ï¼