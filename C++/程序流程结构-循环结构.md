# C++ 循环结构知识点详解

## 🔁 循环结构概述
循环结构用于重复执行代码块，直到满足特定条件。C++提供三种主要循环结构：`while`、`do-while` 和 `for`。

## 🔄 1. while 循环
- **语法**：
  ```cpp
  while (条件表达式) {
      // 循环体
  }
  ```
- **特点**：
  - 先判断条件，后执行循环体
  - 循环体可能一次都不执行（条件初始为假）
  - 适合不确定循环次数的场景

### 基础案例
```cpp
// 计算1-100的和
int i = 1, sum = 0;
while (i <= 100) {
    sum += i;
    i++;
}
cout << "1-100的和为: " << sum << endl;  // 5050
```

### 应用案例：密码验证
```cpp
string password = "admin123";
string input;
int attempts = 3;

while (attempts > 0) {
    cout << "请输入密码（剩余" << attempts << "次尝试）: ";
    cin >> input;
    
    if (input == password) {
        cout << "登录成功！" << endl;
        break;
    } else {
        attempts--;
        if (attempts > 0) {
            cout << "密码错误，请重试！" << endl;
        }
    }
}

if (attempts == 0) {
    cout << "账户已锁定！" << endl;
}
```

## 🔂 2. do-while 循环
- **语法**：
  ```cpp
  do {
      // 循环体
  } while (条件表达式);
  ```
- **特点**：
  - 先执行循环体，后判断条件
  - 循环体至少执行一次
  - 适合需要先执行操作再判断的场景

### 基础案例
```cpp
// 用户菜单选择
int choice;
do {
    cout << "\n===== 菜单 =====" << endl;
    cout << "1. 查询余额" << endl;
    cout << "2. 存款" << endl;
    cout << "3. 取款" << endl;
    cout << "0. 退出" << endl;
    cout << "请选择操作: ";
    cin >> choice;
    
    // 模拟操作
    switch(choice) {
        case 1: cout << "余额: 1000元" << endl; break;
        case 2: cout << "存款操作..." << endl; break;
        case 3: cout << "取款操作..." << endl; break;
        case 0: cout << "感谢使用！" << endl; break;
        default: cout << "无效选择！" << endl;
    }
} while (choice != 0);  // 输入0时退出
```

### 应用案例：数字位数统计
```cpp
int number, count = 0;
cout << "输入一个正整数: ";
cin >> number;

do {
    number /= 10;  // 去掉最后一位
    count++;       // 位数计数
} while (number > 0);

cout << "该数字有 " << count << " 位" << endl;
```

## ➿ 3. for 循环
- **语法**：
  ```cpp
  for (初始化语句; 条件表达式; 更新语句) {
      // 循环体
  }
  ```
- **特点**：
  - 结构紧凑，循环控制集中
  - 适合已知循环次数的场景
  - 初始化语句和更新语句可以是逗号表达式

### 基础案例
```cpp
// 计算阶乘
int n = 5, factorial = 1;
for (int i = 1; i <= n; i++) {
    factorial *= i;
}
cout << n << "! = " << factorial << endl;  // 120

// 倒序输出
for (int i = 10; i > 0; i--) {
    cout << i << " ";
}
// 输出: 10 9 8 7 6 5 4 3 2 1
```

### 特殊用法
```cpp
// 多个控制变量
for (int i = 0, j = 10; i < j; i++, j--) {
    cout << "i=" << i << ", j=" << j << endl;
}

// 省略部分表达式
int k = 0;
for (; k < 5; ) {  // 类似while循环
    cout << k << " ";
    k++;
}
```

### 应用案例：素数判断
```cpp
int num;
bool isPrime = true;
cout << "输入一个正整数: ";
cin >> num;

if (num <= 1) {
    isPrime = false;
} else {
    // 优化：只需检查到sqrt(num)
    for (int i = 2; i * i <= num; i++) {
        if (num % i == 0) {
            isPrime = false;
            break;
        }
    }
}

cout << num << (isPrime ? "是素数" : "不是素数") << endl;
```

	for( i = 0; i < x ; i++ ) //循环 x 次
	当 i=0 时，i 小于几，就循环几次
## 🌀 4. 嵌套循环
- **概念**：在一个循环体内包含另一个循环
- **应用**：处理多维数据（如矩阵、表格）

### 基础案例：乘法表
```cpp
for (int i = 1; i <= 9; i++) {         // 外层控制行
    for (int j = 1; j <= i; j++) {     // 内层控制列
        cout << j << "×" << i << "=" << i*j << "\t";
    }
    cout << endl;  // 换行
}
```

### 应用案例：矩阵运算
```cpp
const int ROWS = 3, COLS = 3;
int matrixA[ROWS][COLS] = {{1,2,3},{4,5,6},{7,8,9}};
int matrixB[ROWS][COLS] = {{9,8,7},{6,5,4},{3,2,1}};
int result[ROWS][COLS] = {0};

// 矩阵加法
for (int i = 0; i < ROWS; i++) {
    for (int j = 0; j < COLS; j++) {
        result[i][j] = matrixA[i][j] + matrixB[i][j];
    }
}

// 打印结果
cout << "矩阵相加结果：" << endl;
for (int i = 0; i < ROWS; i++) {
    for (int j = 0; j < COLS; j++) {
        cout << setw(4) << result[i][j];
    }
    cout << endl;
}
```

## ⏯ 5. 循环控制语句
| 语句      | 作用                           |
|-----------|--------------------------------|
| `break`   | 立即终止当前循环               |
| `continue`| 跳过本次循环剩余代码，进入下一轮循环 |

### 应用案例
```cpp
// 查找第一个能被3和5整除的数
for (int i = 1; i <= 100; i++) {
    if (i % 3 != 0) {
        continue;  // 跳过不能被3整除的数
    }
    
    if (i % 5 == 0) {
        cout << "找到第一个符合条件的数: " << i << endl;
        break;    // 找到后立即终止循环
    }
}

// 输出100以内的质数
cout << "100以内的质数: ";
for (int num = 2; num <= 100; num++) {
    bool isPrime = true;
    for (int i = 2; i * i <= num; i++) {
        if (num % i == 0) {
            isPrime = false;
            break;  // 发现因子即终止内层循环
        }
    }
    if (isPrime) {
        cout << num << " ";
    }
}
```

## 🚀 循环结构最佳实践

### 1. 循环选择指南
| 场景                     | 推荐结构       |
|--------------------------|---------------|
| 循环次数已知             | `for`         |
| 循环次数未知             | `while`       |
| 至少执行一次             | `do-while`    |
| 遍历数组/容器            | `for` 或范围循环 |
| 复杂条件控制             | `while`       |

### 2. 避免无限循环
```cpp
// 错误示例：缺少更新语句
int i = 0;
while (i < 5) {
    cout << i << " ";
    // 忘记 i++ 会导致无限循环
}

// 正确做法
int i = 0;
while (i < 5) {
    cout << i << " ";
    i++;  // 确保循环变量更新
}
```

### 3. 性能优化技巧
```cpp
// 减少循环内部计算
// 低效写法
for (int i = 0; i < strlen(s); i++) { ... }

// 高效写法
int len = strlen(s);  // 预先计算
for (int i = 0; i < len; i++) { ... }

// 循环展开（编译器通常自动优化）
for (int i = 0; i < 100; i += 5) {
    // 处理5个元素
    process(i);
    process(i+1);
    process(i+2);
    process(i+3);
    process(i+4);
}
```

### 4. 现代C++范围循环
```cpp
// 遍历数组
int arr[] = {1, 2, 3, 4, 5};
for (int num : arr) {
    cout << num << " ";
}

// 遍历字符串
string str = "Hello";
for (char c : str) {
    cout << c << " ";
}

// 使用auto自动类型推导
vector<double> prices = {9.99, 15.49, 7.25};
for (auto price : prices) {
    cout << price << endl;
}
```

## 📊 综合应用案例

### 案例1：图形打印（金字塔）
```cpp
int rows;
cout << "输入金字塔行数: ";
cin >> rows;

for (int i = 1; i <= rows; i++) {
    // 打印空格
    for (int j = 1; j <= rows - i; j++) {
        cout << " ";
    }
    
    // 打印星号
    for (int k = 1; k <= 2*i-1; k++) {
        cout << "*";
    }
    cout << endl;
}
```

### 案例2：斐波那契数列
```cpp
int n;
cout << "输入斐波那契数列项数: ";
cin >> n;

long long a = 0, b = 1;
cout << "斐波那契数列前" << n << "项: ";

if (n >= 1) cout << a << " ";
if (n >= 2) cout << b << " ";

for (int i = 3; i <= n; i++) {
    long long next = a + b;
    cout << next << " ";
    
    // 更新前两项
    a = b;
    b = next;
}
```

### 案例3：冒泡排序
```cpp
int arr[] = {5, 3, 8, 6, 2, 7, 1, 4};
int n = sizeof(arr) / sizeof(arr[0]);

cout << "排序前: ";
for (int num : arr) cout << num << " ";

// 冒泡排序
for (int i = 0; i < n-1; i++) {
    for (int j = 0; j < n-1-i; j++) {
        if (arr[j] > arr[j+1]) {
            // 交换元素
            int temp = arr[j];
            arr[j] = arr[j+1];
            arr[j+1] = temp;
        }
    }
}

cout << "\n排序后: ";
for (int num : arr) cout << num << " ";
```

> **💡 循环设计原则**  
> 1. 优先选择最适合问题的循环结构  
> 2. 确保循环有明确的终止条件  
> 3. 避免过度嵌套（一般不超过3层）  
> 4. 使用`break`和`continue`增强控制逻辑  
> 5. 对于容器遍历，优先使用范围循环（C++11）