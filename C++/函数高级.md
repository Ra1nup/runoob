# C++ å‡½æ•°é«˜çº§ç‰¹æ€§è¯¦è§£

## ğŸ“Œ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¦‚è§ˆ

```mermaid
graph TD
    A[å‡½æ•°é«˜çº§ç‰¹æ€§] --> B[é»˜è®¤å‚æ•°]
    A --> C[å ä½å‚æ•°]
    A --> D[å‡½æ•°é‡è½½]
    D --> E[åŸºæœ¬è¯­æ³•]
    D --> F[æ³¨æ„äº‹é¡¹]
```

## 1. å‡½æ•°çš„é»˜è®¤å‚æ•°

### å®šä¹‰ä¸è¯­æ³•
- **ä½œç”¨**ï¼šä¸ºå‡½æ•°å‚æ•°æä¾›é»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯çœç•¥è¯¥å‚æ•°
- **è¯­æ³•**ï¼š`è¿”å›å€¼ç±»å‹ å‡½æ•°å(å‚æ•°ç±»å‹ å‚æ•°å = é»˜è®¤å€¼)`

### ä½¿ç”¨è§„åˆ™
1. é»˜è®¤å‚æ•°å¿…é¡»ä»**å³å‘å·¦**è¿ç»­è®¾ç½®
2. å‡½æ•°å£°æ˜å’Œå®šä¹‰åªèƒ½åœ¨ä¸€å¤„æŒ‡å®šé»˜è®¤å‚æ•°
3. é»˜è®¤å€¼å¯ä»¥æ˜¯å¸¸é‡ã€å…¨å±€å˜é‡æˆ–å‡½æ•°è°ƒç”¨

### ä»£ç ç¤ºä¾‹
```cpp
// æ­£ç¡®ç¤ºä¾‹ï¼šä»å³å‘å·¦è®¾ç½®
void printInfo(string name, int age = 18, double height = 170.0) {
    cout << "å§“å: " << name << ", å¹´é¾„: " << age 
         << ", èº«é«˜: " << height << "cm" << endl;
}

int main() {
    printInfo("å¼ ä¸‰");             // ä½¿ç”¨ä¸¤ä¸ªé»˜è®¤å‚æ•°
    printInfo("æå››", 25);         // ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å‚æ•°
    printInfo("ç‹äº”", 30, 175.5);  // ä¸ä½¿ç”¨é»˜è®¤å‚æ•°
    return 0;
}
```

### é”™è¯¯ç¤ºä¾‹
```cpp
// é”™è¯¯1ï¼šéè¿ç»­é»˜è®¤å‚æ•°
// void func(int a = 1, int b, int c = 3); // ç¼–è¯‘é”™è¯¯

// é”™è¯¯2ï¼šå¤šå¤„å®šä¹‰é»˜è®¤å‚æ•°
void declare(int x = 5); // å£°æ˜å¤„æŒ‡å®š

// å®šä¹‰å¤„å†æ¬¡æŒ‡å®šä¼šæŠ¥é”™
// void declare(int x = 10) {  } 
```

### åº”ç”¨åœºæ™¯
```cpp
// åˆ›å»ºçª—å£å‡½æ•°
void createWindow(string title, int width = 800, int height = 600) {
    // ä½¿ç”¨é»˜è®¤åˆ†è¾¨ç‡åˆ›å»ºçª—å£
}

// è®¡ç®—åˆ©æ¯
double calculateInterest(double principal, double rate = 0.05, int years = 1) {
    return principal * pow(1 + rate, years);
}
```

## 2. å‡½æ•°çš„å ä½å‚æ•°

### å®šä¹‰ä¸ç‰¹æ€§
- **ä½œç”¨**ï¼šé¢„ç•™å‚æ•°ä½ç½®ï¼Œå¢å¼ºä»£ç æ‰©å±•æ€§
- **è¯­æ³•**ï¼š`è¿”å›å€¼ç±»å‹ å‡½æ•°å(æ•°æ®ç±»å‹)`
- **ç‰¹ç‚¹**ï¼š
  - åªæœ‰æ•°æ®ç±»å‹æ²¡æœ‰å‚æ•°å
  - è°ƒç”¨æ—¶å¿…é¡»ä¼ é€’å¯¹åº”ç±»å‹çš„å‚æ•°
  - é€šå¸¸ç”¨äºå‡½æ•°é‡è½½æˆ–å…¼å®¹æ—§æ¥å£

### ä½¿ç”¨ç¤ºä¾‹
```cpp
// å ä½å‚æ•°å‡½æ•°
void placeholderFunc(int a, int, string) {
    cout << "a = " << a << endl;
    // å ä½å‚æ•°æ— æ³•åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨
}

int main() {
    placeholderFunc(10, 20, "test"); // å¿…é¡»ä¼ é€’ä¸‰ä¸ªå‚æ•°
    // placeholderFunc(5); // é”™è¯¯ï¼å‚æ•°æ•°é‡ä¸åŒ¹é…
    return 0;
}
```

### é«˜çº§ç”¨æ³•
```cpp
// 1. ç»“åˆé»˜è®¤å‚æ•°
void advancedPlaceholder(int, int = 10) {
    // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å ä½ï¼Œç¬¬äºŒä¸ªæœ‰é»˜è®¤å€¼
}

// 2. å‡½æ•°é‡è½½åŒºåˆ†
void process(int value) { /* ç‰ˆæœ¬1 */ }
void process(int value, int) { /* ç‰ˆæœ¬2ï¼ˆå ä½å‚æ•°ï¼‰*/ }

// 3. å…¼å®¹Cè¯­è¨€å›è°ƒ
void callback(int, void*) { /* åŒ¹é…Cé£æ ¼å›è°ƒ */ }
```

### å®é™…åº”ç”¨åœºæ™¯
```cpp
// æœªæ¥æ‰©å±•é¢„ç•™ä½ç½®
void saveToFile(string filename, int) {
    // å½“å‰åªä½¿ç”¨filename
    // ç¬¬äºŒä¸ªå‚æ•°ä¸ºå°†æ¥æ‰©å±•é¢„ç•™
}

// æ“ä½œç¬¦é‡è½½å ä½
class MyClass {
public:
    // åç½®++æ“ä½œç¬¦é‡è½½
    MyClass operator++(int) { // intä¸ºå ä½å‚æ•°
        MyClass temp = *this;
        // å®ç°é€’å¢é€»è¾‘
        return temp;
    }
};
```

## 3. å‡½æ•°é‡è½½-åŸºæœ¬è¯­æ³•

### å®šä¹‰ä¸æ¡ä»¶
- **å‡½æ•°é‡è½½**ï¼šåŒä¸€ä½œç”¨åŸŸå†…ï¼Œå‡½æ•°åç›¸åŒä½†å‚æ•°åˆ—è¡¨ä¸åŒ
- **é‡è½½æ¡ä»¶**ï¼š
  - å‚æ•°ç±»å‹ä¸åŒ
  - å‚æ•°ä¸ªæ•°ä¸åŒ
  - å‚æ•°é¡ºåºä¸åŒï¼ˆéœ€ç±»å‹ä¸åŒï¼‰

### åŸºæœ¬è¯­æ³•
```cpp
// 1. å‚æ•°ç±»å‹ä¸åŒ
void print(int value) {
    cout << "æ•´æ•°: " << value << endl;
}

void print(double value) {
    cout << "æµ®ç‚¹æ•°: " << value << endl;
}

// 2. å‚æ•°ä¸ªæ•°ä¸åŒ
void log(string message) {
    cout << "[INFO] " << message << endl;
}

void log(string message, int severity) {
    cout << "[LEVEL " << severity << "] " << message << endl;
}

// 3. å‚æ•°é¡ºåºä¸åŒ
void connect(string ip, int port) { /* ... */ }
void connect(int port, string ip) { /* ... */ }
```

### è°ƒç”¨æœºåˆ¶
```cpp
int main() {
    print(10);      // è°ƒç”¨print(int)
    print(3.14);    // è°ƒç”¨print(double)
    print('A');     // è°ƒç”¨print(int) - å­—ç¬¦æå‡
    
    log("ç³»ç»Ÿå¯åŠ¨");           // è°ƒç”¨å•å‚æ•°ç‰ˆæœ¬
    log("å‘ç”Ÿé”™è¯¯", 3);        // è°ƒç”¨åŒå‚æ•°ç‰ˆæœ¬
    
    connect("192.168.1.1", 80); // ç¬¬ä¸€ä¸ªç‰ˆæœ¬
    connect(8080, "localhost"); // ç¬¬äºŒä¸ªç‰ˆæœ¬
    
    return 0;
}
```

### é‡è½½è§£æè§„åˆ™
1. ç²¾ç¡®åŒ¹é…
2. ç±»å‹æå‡ï¼ˆcharâ†’int, floatâ†’doubleï¼‰
3. æ ‡å‡†è½¬æ¢ï¼ˆintâ†’doubleï¼‰
4. ç”¨æˆ·å®šä¹‰è½¬æ¢
5. å¯å˜å‚æ•°åŒ¹é…

## 4. å‡½æ•°é‡è½½-æ³¨æ„äº‹é¡¹

### æ³¨æ„äº‹é¡¹åˆ—è¡¨

| æ³¨æ„äº‹é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|----------|------|------|
| **è¿”å›å€¼ä¸åŒä¸æ„æˆé‡è½½** | ä»…è¿”å›å€¼ä¸åŒæ— æ•ˆ | `int func();`<br>`void func();` âŒ |
| **ä½œç”¨åŸŸå½±å“** | ä¸åŒä½œç”¨åŸŸçš„åŒåå‡½æ•°ä¸æ„æˆé‡è½½ | åŸºç±»å’Œæ´¾ç”Ÿç±»åŒåå‡½æ•° |
| **constä¿®é¥°ç¬¦** | constæˆå‘˜å‡½æ•°ä¸éconstæˆå‘˜å‡½æ•°å¯é‡è½½ | `void func() const;`<br>`void func();` |
| **å‚æ•°constä¿®é¥°** | é¡¶å±‚constä¸å½±å“é‡è½½ | `void func(int);`<br>`void func(const int);` âŒ |
| **å¼•ç”¨ç±»å‹çš„const** | åº•å±‚constå½±å“é‡è½½ | `void func(int&);`<br>`void func(const int&);` âœ… |
| **ç±»å‹åˆ«åå†²çª** | ç±»å‹åˆ«åä¸å½±å“é‡è½½ | `typedef int MyInt;`<br>`void func(int);`<br>`void func(MyInt);` âŒ |

### è¯¦ç»†ç¤ºä¾‹

#### 1. è¿”å›å€¼ä¸åŒä¸æ„æˆé‡è½½
```cpp
// ç¼–è¯‘é”™è¯¯ï¼šä»…è¿”å›å€¼ç±»å‹ä¸åŒ
int getValue() { return 42; }
double getValue() { return 3.14; } // é‡å®šä¹‰é”™è¯¯
```

#### 2. ä½œç”¨åŸŸå½±å“
```cpp
class Base {
public:
    void show() { cout << "Base\n"; }
};

class Derived : public Base {
public:
    void show(int) { cout << "Derived\n"; } // éšè—åŸºç±»show()
};

int main() {
    Derived d;
    d.show(5);    // æ­£ç¡®ï¼šè°ƒç”¨Derived::show(int)
    // d.show();  // é”™è¯¯ï¼åŸºç±»show()è¢«éšè—
    d.Base::show(); // æ­£ç¡®ï¼šæ˜¾å¼è°ƒç”¨åŸºç±»æ–¹æ³•
}
```

#### 3. constæˆå‘˜å‡½æ•°é‡è½½
```cpp
class Text {
    string content;
public:
    // constç‰ˆæœ¬
    char& operator[](size_t pos) const {
        return const_cast<char&>(content[pos]);
    }
    
    // éconstç‰ˆæœ¬
    char& operator[](size_t pos) {
        return content[pos];
    }
};

int main() {
    Text t1;
    const Text t2;
    
    t1[0] = 'A';  // è°ƒç”¨éconstç‰ˆæœ¬
    char c = t2[0]; // è°ƒç”¨constç‰ˆæœ¬
}
```

#### 4. å¼•ç”¨ç±»å‹çš„consté‡è½½
```cpp
// æ­£ç¡®é‡è½½ï¼šåº•å±‚constä¸åŒ
void process(int &x) {
    x++; // å¯ä¿®æ”¹
    cout << "å¯ä¿®æ”¹ç‰ˆæœ¬: " << x << endl;
}

void process(const int &x) {
    // x++; // ä¸èƒ½ä¿®æ”¹
    cout << "åªè¯»ç‰ˆæœ¬: " << x << endl;
}

int main() {
    int a = 10;
    const int b = 20;
    
    process(a); // è°ƒç”¨å¯ä¿®æ”¹ç‰ˆæœ¬
    process(b); // è°ƒç”¨åªè¯»ç‰ˆæœ¬
    process(30); // è°ƒç”¨åªè¯»ç‰ˆæœ¬ï¼ˆç»‘å®šä¸´æ—¶å¯¹è±¡ï¼‰
}
```

### é‡è½½æœ€ä½³å®è·µ

1. **é¿å…æ­§ä¹‰é‡è½½**
   ```cpp
   void func(long);
   void func(double);
   
   func(5); // æ­§ä¹‰ï¼intå¯è½¬longæˆ–double
   ```

2. **ä½¿ç”¨æ˜ç¡®çš„é‡è½½ç­¾å**
   ```cpp
   // æ˜ç¡®å¤„ç†æ•´æ•°å’Œæµ®ç‚¹æ•°
   void handleNumber(int num) { /* æ•´æ•°å¤„ç† */ }
   void handleNumber(double num) { /* æµ®ç‚¹æ•°å¤„ç† */ }
   ```

3. **SFINAEæŠ€æœ¯ï¼ˆé«˜çº§ï¼‰**
   ```cpp
   // ä½¿ç”¨enable_ifé™åˆ¶é‡è½½
   template <typename T>
   typename enable_if<is_integral<T>::value>::type
   process(T value) { /* æ•´æ•°å¤„ç† */ }
   
   template <typename T>
   typename enable_if<is_floating_point<T>::value>::type
   process(T value) { /* æµ®ç‚¹æ•°å¤„ç† */ }
   ```

## ğŸš€ ç»¼åˆåº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šæ•°å­¦è®¡ç®—åº“
```cpp
// é»˜è®¤å‚æ•°ï¼šè®¡ç®—å¹‚ï¼Œé»˜è®¤æŒ‡æ•°ä¸º2
double power(double base, double exponent = 2.0) {
    return pow(base, exponent);
}

// å‡½æ•°é‡è½½ï¼šä¸åŒç±»å‹è®¡ç®—ç»å¯¹å€¼
int absolute(int x) {
    return (x < 0) ? -x : x;
}

double absolute(double x) {
    return (x < 0) ? -x : x;
}

// å ä½å‚æ•°ï¼šä¸ºæœªæ¥æ‰©å±•é¢„ç•™
void logResult(double value, int = 0) {
    cout << "ç»“æœ: " << value << endl;
}

int main() {
    cout << "5^2 = " << power(5) << endl;       // 25
    cout << "2^5 = " << power(2, 5) << endl;    // 32
    
    cout << "|-5| = " << absolute(-5) << endl;   // 5
    cout << "|-3.14| = " << absolute(-3.14) << endl; // 3.14
    
    logResult(42.0); // ä½¿ç”¨å ä½å‚æ•°
    return 0;
}
```

### æ¡ˆä¾‹2ï¼šå›¾å½¢ç»˜åˆ¶ç³»ç»Ÿ
```cpp
// é»˜è®¤å‚æ•°ï¼šç»˜åˆ¶çŸ©å½¢
void drawRect(int width, int height, string color = "black") {
    cout << "ç»˜åˆ¶" << width << "x" << height 
         << "çš„" << color << "è‰²çŸ©å½¢" << endl;
}

// å‡½æ•°é‡è½½ï¼šä¸åŒå½¢çŠ¶ç»˜åˆ¶
void drawCircle(int radius) {
    cout << "ç»˜åˆ¶åŠå¾„" << radius << "çš„åœ†" << endl;
}

void drawCircle(int radius, string color) {
    cout << "ç»˜åˆ¶" << color << "è‰²çš„åœ†, åŠå¾„" << radius << endl;
}

// å ä½å‚æ•°ï¼šå…¼å®¹æ—§ç‰ˆAPI
void renderScene(int sceneId, int) {
    cout << "æ¸²æŸ“åœºæ™¯#" << sceneId << endl;
}

int main() {
    drawRect(100, 200);          // é»˜è®¤é»‘è‰²
    drawRect(50, 50, "blue");     // æŒ‡å®šè“è‰²
    
    drawCircle(10);               // é»˜è®¤é¢œè‰²
    drawCircle(15, "red");        // æŒ‡å®šçº¢è‰²
    
    renderScene(1, 0);            // ä½¿ç”¨å ä½å‚æ•°
    return 0;
}
```

### æ¡ˆä¾‹3ï¼šæ™ºèƒ½å­—ç¬¦ä¸²å¤„ç†
```cpp
// é‡è½½ï¼šå­—ç¬¦ä¸²è½¬æ¢
string toString(int value) {
    return to_string(value);
}

string toString(double value) {
    return to_string(value);
}

string toString(bool value) {
    return value ? "true" : "false";
}

// é»˜è®¤å‚æ•°+é‡è½½ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
string join(string s1, string s2, string delimiter = ", ") {
    return s1 + delimiter + s2;
}

string join(vector<string> strs, string delimiter = ", ") {
    string result;
    for (size_t i = 0; i < strs.size(); i++) {
        if (i > 0) result += delimiter;
        result += strs[i];
    }
    return result;
}

int main() {
    cout << join("Hello", "World") << endl; // Hello, World
    cout << join({toString(10), toString(3.14), toString(true)}) << endl;
    // 10, 3.140000, true
    return 0;
}
```

## âš ï¸ å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1ï¼šé»˜è®¤å‚æ•°é‡å®šä¹‰
```cpp
// å¤´æ–‡ä»¶.h
void setup(int timeout = 1000); // å£°æ˜æŒ‡å®šé»˜è®¤å‚æ•°

// æºæ–‡ä»¶.cpp
void setup(int timeout /* = 1000 */) { // å®šä¹‰å¤„ä¸èƒ½å†æŒ‡å®š
    // ...
}
```

### é”™è¯¯2ï¼šé‡è½½æ­§ä¹‰
```cpp
void process(float value) { /* ... */ }
void process(double value) { /* ... */ }

process(5.0); // æ­§ä¹‰ï¼5.0æ˜¯doubleï¼Œä½†å¯è½¬float
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```cpp
// 1. æ˜¾å¼æŒ‡å®šç±»å‹
process(static_cast<double>(5.0));

// 2. åˆ é™¤å†²çªé‡è½½
void process(double value) { /* ... */ }
// åˆ é™¤floatç‰ˆæœ¬

// 3. æ·»åŠ ç²¾ç¡®åŒ¹é…
void process(long double value) { /* ... */ } // æ›´ç²¾ç¡®åŒ¹é…
```

### é”™è¯¯3ï¼šéšè—åŸºç±»å‡½æ•°
```cpp
class Base {
public:
    void func(int) {}
};

class Derived : public Base {
public:
    void func(string) {} // éšè—åŸºç±»func(int)
};

Derived d;
d.func("text"); // æ­£ç¡®
d.func(42);     // é”™è¯¯ï¼åŸºç±»funcè¢«éšè—
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```cpp
class Derived : public Base {
public:
    using Base::func; // å¼•å…¥åŸºç±»å‡½æ•°
    void func(string) {}
};
```

## ğŸ“Š ç‰¹æ€§å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | é»˜è®¤å‚æ•° | å ä½å‚æ•° | å‡½æ•°é‡è½½ |
|------|----------|----------|----------|
| **ä¸»è¦ç›®çš„** | ç®€åŒ–è°ƒç”¨ | é¢„ç•™æ‰©å±• | å¤šæ€æ”¯æŒ |
| **è¯­æ³•ç‰¹å¾** | `å‚æ•°=é»˜è®¤å€¼` | `ç±»å‹` | åŒåä¸åŒå‚ |
| **è°ƒç”¨å½±å“** | å¯çœç•¥å‚æ•° | å¿…é¡»ä¼ å‚ | è‡ªåŠ¨åŒ¹é… |
| **é€‚ç”¨åœºæ™¯** | å¸¸ç”¨å‚æ•°é¢„è®¾ | APIå…¼å®¹æ€§ | ç±»å‹æ•æ„Ÿæ“ä½œ |
| **æ³¨æ„äº‹é¡¹** | å³å‘å·¦è¿ç»­ | æ— æ³•ä½¿ç”¨å‚æ•° | é¿å…æ­§ä¹‰ |
| **ç»“åˆä½¿ç”¨** | å¯ä¸é‡è½½ç»“åˆ | å¯ä¸é‡è½½ç»“åˆ | å¯ä¸é»˜è®¤å‚æ•°ç»“åˆ |

> ğŸ’¡ **æœ€ä½³å®è·µå»ºè®®**  
> 1. **é»˜è®¤å‚æ•°**ï¼šä¼˜å…ˆåœ¨å‡½æ•°å£°æ˜ä¸­æŒ‡å®šï¼Œå®šä¹‰ä¸­çœç•¥  
> 2. **å ä½å‚æ•°**ï¼šè°¨æ…ä½¿ç”¨ï¼Œæ·»åŠ æ–‡æ¡£è¯´æ˜ç”¨é€”  
> 3. **å‡½æ•°é‡è½½**ï¼šç¡®ä¿é‡è½½å‡½æ•°åŠŸèƒ½è¯­ä¹‰ç›¸ä¼¼  
> 4. **é¿å…æ­§ä¹‰**ï¼šè®¾è®¡æ¸…æ™°çš„å‡½æ•°ç­¾å  
> 5. **ç°ä»£C++æ›¿ä»£**ï¼šè€ƒè™‘ä½¿ç”¨æ¨¡æ¿å’Œ`std::variant`æ›¿ä»£éƒ¨åˆ†é‡è½½åœºæ™¯